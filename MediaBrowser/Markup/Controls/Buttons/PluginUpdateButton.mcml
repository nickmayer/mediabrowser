<Mcml xmlns="http://schemas.microsoft.com/2006/mcml"
	  xmlns:cor="assembly://MSCorLib/System"
      xmlns:me="Me">

	<UI Name="PluginUpdateButton">

		<Locals>
      <Command Name="UpdatePlugins" Description="^"/>
		</Locals>


		<Content>
      <Panel Name="MainPanel"  >
        <Layout>
          <FlowLayout Orientation="Horizontal" ItemAlignment="Center" Spacing="10,10"/>
        </Layout>
        <Children>
 			    <me:GreenBallButton Command="[UpdatePlugins]" MaximumSize="40,40" />
          <Text Color="AntiqueWhite" Font="Segoe Media Center, 16" Content="Some of your plug-ins have updates available" />
        </Children>
      </Panel>
		</Content>

	</UI>
  
  <UI Name="GreenBallButton">

    <Properties>

      <!-- Command is a required parameter. -->
      <ICommand Name="Command" ICommand="$Required"/>

      <!-- Label color and font properties. -->
      <Font Name="LabelFont" Font="Century Gothic,16"/>
      <Color Name="LabelColor" Color="215,215,215"/>
      <Color Name="LabelHover" Color="255,255,255"/>
      <Color Name="LabelClicking" Color="112,112,112"/>

    </Properties>

    <Locals>

      <!-- React to "click" input. -->
      <ClickHandler Name="Clicker" Command="[Command]"/>

    </Locals>

    <Rules>

      <!-- The command description is displayed by the text box. A  -->
      <!-- binding is used in case the description changes at       -->
      <!-- runtime.                                                 -->
      <Binding Source="[Command.Description]" Target="[LabelShadow.Content]"/>
      <Binding Source="[Command.Description]" Target="[Label.Content]"/>

      <!-- Clicking state and effects -->
      <Condition Source="[Clicker.Clicking]" SourceValue="true">
        <Actions>
          <Set Target="[Label.Color]" Value="[LabelClicking]"/>
        </Actions>
      </Condition>

      <!-- Mouse and key focused state and effects -->
      <Rule ConditionLogicalOp="Or">
        <Conditions>
          <Equality Source="[Input.MouseFocus]" Value="true"/>
          <Equality Source="[Input.KeyFocus]" Value="true"/>
        </Conditions>
        <Actions>
          <Set Target="[Label.Color]" Value="[LabelHover]"/>
        </Actions>
      </Rule>

      <!-- Accessibility -->
      <Binding Target="[Accessible.IsPressed]"            Source="[Clicker.Clicking]"/>
      <Binding Target="[Accessible.IsFocusable]"          Source="[Input.KeyInteractive]"/>
      <Binding Target="[Accessible.IsFocused]"            Source="[Input.KeyFocus]"/>
      <Binding Target="[Accessible.Name]"                 Source="[Command.Description]"/>
      <Default Target="[Accessible.DefaultActionCommand]" Value="[Command]"/>
      <Default Target="[Accessible.DefaultAction]"        Value="Press"/>
      <Default Target="[Accessible.Role]"                 Value="PushButton"/>

    </Rules>

    <Content>

      <Panel Layout="Anchor">
        <Children>

          <Text Name="Label" Font="[LabelFont]" Color="[LabelColor]"/>

          <Text Name="LabelShadow" Font="[LabelFont]" Color="0,0,0">
            <LayoutInput>
              <AnchorLayoutInput Left="Label,0,3" Top="Label,0,3"/>
            </LayoutInput>
          </Text>

          <Graphic Name="GreenBallLight" Content="image://me:GreenBallLight"
                   MouseInteractive="true">
            <Animations>
              <Animation Type="Idle" Loop="-1">
                <Keyframes>
                  <AlphaKeyframe Time="0" Value="0"/>
                  <AlphaKeyframe Time="1.3" Value="1"/>
                  <AlphaKeyframe Time="1.7" Value="1"/>
                  <AlphaKeyframe Time="3" Value="0"/>
                </Keyframes>
              </Animation>
            </Animations>
          </Graphic>

          <Graphic Name="GreenBallDark" Content="image://me:GreenBallDark"/>

          <Graphic Name="GreenBallGlow" Content="image://me:GreenBallGlow" Alpha=".8">
            <LayoutInput>
              <AnchorLayoutInput Left="GreenBallLight,0,-8" Top="GreenBallLight,1"
                                 ContributesToWidth="false" ContributesToHeight="false"/>
            </LayoutInput>
            <Animations>
              <Animation Type="Idle" Loop="-1">
                <Keyframes>
                  <AlphaKeyframe Time="0" Value="0"/>
                  <AlphaKeyframe Time="1.3" Value=".5"/>
                  <AlphaKeyframe Time="1.7" Value=".5"/>
                  <AlphaKeyframe Time="3" Value="0"/>
                  <RotateKeyframe Time="0" Value="-75deg;1,0,0"/>
                  <RotateKeyframe Time="0.001" Value="-75deg;1,0,0"/>
                </Keyframes>
              </Animation>
            </Animations>
          </Graphic>

          <Graphic Name="GreenBallShadow" Content="image://me:GreenBallShadow" Alpha=".8">
            <LayoutInput>
              <AnchorLayoutInput Left="GreenBallLight,0,-5" Top="GreenBallLight,1,-7"
                                 ContributesToWidth="false" ContributesToHeight="false"/>
            </LayoutInput>
            <Animations>
              <Animation Type="Idle" Loop="-1" CenterPointPercent=".5,.5,.5">
                <Keyframes>
                  <AlphaKeyframe Time="0" Value="1"/>
                  <AlphaKeyframe Time="1.3" Value="1"/>
                  <AlphaKeyframe Time="1.7" Value="1"/>
                  <AlphaKeyframe Time="3" Value="1"/>
                  <RotateKeyframe Time="0" Value="-75deg;1,0,0"/>
                  <RotateKeyframe Time="0.001" Value="-75deg;1,0,0"/>
                </Keyframes>
              </Animation>
            </Animations>
          </Graphic>

        </Children>
      </Panel>

    </Content>

  </UI>

  <!-- Images -->

  <Image Name="GreenBallLight" Source="resx://MediaBrowser/MediaBrowser.Resources/GreenBallLight" />
  <Image Name="GreenBallDark" Source="resx://MediaBrowser/MediaBrowser.Resources/GreenBallDark" />
  <Image Name="GreenBallGlow" Source="resx://MediaBrowser/MediaBrowser.Resources/GreenBallGlow" />
  <Image Name="GreenBallShadow" Source="resx://MediaBrowser/MediaBrowser.Resources/GreenBallShadow" />

</Mcml>